"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[4745],{31536:(e,t,n)=>{n.d(t,{Z:()=>x});var a=n(80102),o=n(83117),i=n(67294),l=n(10209),r=n(59766),s=n(94780),c=n(34867);const u=(0,n(70182).ZP)();var p=n(65149),m=n(39707),d=n(66500),h=n(95408),k=n(98700),v=n(85893);const g=["component","direction","spacing","divider","children","className","useFlexGap"],b=(0,d.Z)(),f=u("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function N(e){return(0,p.Z)({props:e,name:"MuiStack",defaultTheme:b})}function C(e,t){const n=i.Children.toArray(e).filter(Boolean);return n.reduce(((e,a,o)=>(e.push(a),o<n.length-1&&e.push(i.cloneElement(t,{key:`separator-${o}`})),e)),[])}const Z=({ownerState:e,theme:t})=>{let n=(0,o.Z)({display:"flex",flexDirection:"column"},(0,h.k9)({theme:t},(0,h.P$)({values:e.direction,breakpoints:t.breakpoints.values}),(e=>({flexDirection:e}))));if(e.spacing){const a=(0,k.hB)(t),o=Object.keys(t.breakpoints.values).reduce(((t,n)=>(("object"==typeof e.spacing&&null!=e.spacing[n]||"object"==typeof e.direction&&null!=e.direction[n])&&(t[n]=!0),t)),{}),i=(0,h.P$)({values:e.direction,base:o}),l=(0,h.P$)({values:e.spacing,base:o});"object"==typeof i&&Object.keys(i).forEach(((e,t,n)=>{if(!i[e]){const a=t>0?i[n[t-1]]:"column";i[e]=a}}));const s=(t,n)=>{return e.useFlexGap?{gap:(0,k.NA)(a,t)}:{"& > :not(style) ~ :not(style)":{margin:0,[`margin${o=n?i[n]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[o]}`]:(0,k.NA)(a,t)}};var o};n=(0,r.Z)(n,(0,h.k9)({theme:t},l,s))}return n=(0,h.dt)(t.breakpoints,n),n};var I=n(90948),S=n(71657);const y=function(e={}){const{createStyledComponent:t=f,useThemeProps:n=N,componentName:r="MuiStack"}=e,u=t(Z),p=i.forwardRef((function(e,t){const i=n(e),p=(0,m.Z)(i),{component:d="div",direction:h="column",spacing:k=0,divider:b,children:f,className:N,useFlexGap:Z=!1}=p,I=(0,a.Z)(p,g),S={direction:h,spacing:k,useFlexGap:Z},y=(0,s.Z)({root:["root"]},(e=>(0,c.Z)(r,e)),{});return(0,v.jsx)(u,(0,o.Z)({as:d,ownerState:S,ref:t,className:(0,l.Z)(y.root,N)},I,{children:b?C(f,b):f}))}));return p}({createStyledComponent:(0,I.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,S.Z)({props:e,name:"MuiStack"})}),x=y},20036:(e,t,n)=>{n.d(t,{k:()=>b});var a=n(52263),o=n(94054),i=n(33841),l=n(23599),r=n(90629),s=n(43246),c=n(31536),u=n(61903),p=n(50657),m=n(37645),d=n(6514),h=n(31425),k=n(58951),v=n(83321),g=n(67294);const b=(0,g.memo)((()=>{const[e,t]=(0,g.useState)((()=>({name:"Learning GraphQL",edition:1,price:45,storeId:1,authorIds:[1,2]}))),n=(0,g.useCallback)((e=>{t((t=>({...t,name:e.target.value})))}),[]),b=(0,g.useCallback)((e=>{t((t=>({...t,edition:e.target.valueAsNumber})))}),[]),f=(0,g.useCallback)((e=>{t((t=>({...t,price:e.target.valueAsNumber})))}),[]),N=(0,g.useCallback)((e=>{let n;const a=e.target.value;n="string"==typeof a?parseInt(a):a,-1===n&&(n=void 0),t((e=>({...e,storeId:n})))}),[]),C=(0,g.useCallback)((e=>{let n=[];console.log(e.target.value);const a=e.target.value;n="string"==typeof a?a.split(",").map((e=>parseInt(e))):a,t((e=>({...e,authorIds:n})))}),[]),{i18n:Z}=(0,a.Z)(),I=(0,g.useMemo)((()=>"zh"==Z.currentLocale||"zh_cn"==Z.currentLocale||"zh_CN"==Z.currentLocale),[Z.currentLocale]),[S,y]=(0,g.useState)(!1),x=(0,g.useCallback)((()=>{y(!0)}),[]),B=(0,g.useCallback)((()=>{y(!1)}),[]);return g.createElement(r.Z,{elevation:3,style:{padding:"1.5rem",width:500}},g.createElement(c.Z,{spacing:2},g.createElement("h1",null,"Book Form"),g.createElement(u.Z,{label:"Name",value:e.name,onChange:n,error:""===e.name,helperText:""===e.name?"Name is required":""}),g.createElement(u.Z,{label:"Edition",type:"number",value:e.edition,onChange:b}),g.createElement(u.Z,{label:"Price",type:"number",value:e.price,onChange:f}),g.createElement(o.Z,{fullWidth:!0},g.createElement(i.Z,{id:"store-select-label"},"Store"),g.createElement(s.Z,{labelId:"store-select-label",label:"Authors",value:e.storeId,onChange:N},g.createElement(l.Z,{value:-1},"--NONE--"),g.createElement(l.Z,{value:1},"O'REILLY"),g.createElement(l.Z,{value:2},"MANNING"))),g.createElement(o.Z,{fullWidth:!0},g.createElement(i.Z,{id:"author-multi-select-label"},"Authors"),g.createElement(s.Z,{multiple:!0,labelId:"author-multi-select-label",label:"Authors",value:e.authorIds,onChange:C},g.createElement(l.Z,{value:1},"Eve Procello"),g.createElement(l.Z,{value:2},"Alex Banks"),g.createElement(l.Z,{value:3},"Dan Vanderkam"),g.createElement(l.Z,{value:4},"Boris Cherny"),g.createElement(l.Z,{value:5},"Samer Buna"))),g.createElement(o.Z,null,g.createElement(v.Z,{onClick:x,variant:"contained"},I?"\u63d0\u4ea4":"Submit"))),g.createElement(p.Z,{open:S,onClose:B},g.createElement(m.Z,null,I?"\u4fe1\u606f":"Info"),g.createElement(d.Z,null,g.createElement(k.Z,null,I?"\u4ec5\u4f5c\u793a\u8303\uff0c\u65e0\u4efb\u4f55\u6548\u679c":"For demonstration only, without any effect")),g.createElement(h.Z,null,g.createElement(v.Z,{onClick:B},"\u5173\u95ed"))))}))},5860:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>u,toc:()=>m});var a=n(83117),o=(n(67294),n(3905)),i=n(65488),l=n(85162),r=n(20036);const s={sidebar_position:2,title:"Save Short Associations"},c=void 0,u={unversionedId:"quick-view/save/export/short",id:"quick-view/save/export/short",title:"Save Short Associations",description:"What is Short Association",source:"@site/docs/quick-view/save/export/short.mdx",sourceDirName:"quick-view/save/export",slug:"/quick-view/save/export/short",permalink:"/jimmer-doc/docs/quick-view/save/export/short",draft:!1,editUrl:"https://github.com/babyfish-ct/jimmer-doc/tree/main/docs/quick-view/save/export/short.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Save Short Associations"},sidebar:"tutorialSidebar",previous:{title:"Save Aggregate Root",permalink:"/jimmer-doc/docs/quick-view/save/export/root"},next:{title:"Save Long Associations",permalink:"/jimmer-doc/docs/quick-view/save/export/long"}},p={},m=[{value:"What is Short Association",id:"what-is-short-association",level:2},{value:"Define Input DTO",id:"define-input-dto",level:2},{value:"Generated Code",id:"generated-code",level:2},{value:"Write HTTP Service",id:"write-http-service",level:2}],d={toc:m};function h(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"what-is-short-association"},"What is Short Association"),(0,o.kt)("p",null,"A short association refers to only changing the association relationship between the current object and other objects, without further modifying the associated object.  "),(0,o.kt)("p",null,"For the UI interface:  "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Reference association ",(0,o.kt)("em",{parentName:"p"},"(one-to-one and many-to-one)")," is rendered as a radio menu  ")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Collection association ",(0,o.kt)("em",{parentName:"p"},"(one-to-many and many-to-many)")," is rendered as a multiple select menu  "))),(0,o.kt)("p",null,"For example:"),(0,o.kt)(r.k,{mdxType:"ShortAssociation"}),(0,o.kt)("h2",{id:"define-input-dto"},"Define Input DTO"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Install DTO language Intellij plugin: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ClearPlume/jimmer-dto"},"https://github.com/ClearPlume/jimmer-dto")," ",(0,o.kt)("em",{parentName:"p"},"(This process is not required but highly recommended)"),"  ")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Create a new directory ",(0,o.kt)("inlineCode",{parentName:"p"},"src/main/dto"),"  ")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Under ",(0,o.kt)("inlineCode",{parentName:"p"},"src/main/dto"),", create a file ",(0,o.kt)("inlineCode",{parentName:"p"},"Book.dto")," and write the following code:   "),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-sh",metastring:'title="Book.dto"',title:'"Book.dto"'},"input BookInputWithShortAssociations {\n    #allScalars(this) \n    #highlight-next-line  \n    id(store) //default alias storeId  \n    #highlight-next-line\n    id(authors) as authorIds\n}\n")))),(0,o.kt)("h2",{id:"generated-code"},"Generated Code"),(0,o.kt)(i.Z,{groupId:"language",mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="BookInputWithShortAssociations.java"',title:'"BookInputWithShortAssociations.java"'},'@GeneratedBy(\n        file = "<yourproject>/src/main/dto/Book.dto"  \n)\npublic class BookInputWithShortAssociations implements Input<Book> {  \n\n    @Nullable\n    private Long id;  \n\n    @NotNull\n    private String name;\n\n    private int edition;\n\n    @NotNull  \n    private BigDecimal price;\n\n    @Nullable\n    // highlight-next-line\n    private Long storeId;\n\n    @NotNull\n    // highlight-next-line \n    private List<Long> authorIds;\n\n    ...Omit other methods...  \n}\n'))),(0,o.kt)(l.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="BookInputWithShortAssociations.kt"',title:'"BookInputWithShortAssociations.kt"'},'@GeneratedBy(\n        file = "<yourproject>/src/main/dto/Book.dto"\n)  \ndata class BookInputWithShortAssociations(\n    val id: Long?,\n    val name: String,\n    val edition: Int,\n    val price: BigDecimal,\n    // highlight-next-line\n    val storeId: Long? \n    // highlight-next-line\n    val authorIds: List<Long>  \n) : Input<Book> {\n    ...Omit other methods...   \n}\n')))),(0,o.kt)("h2",{id:"write-http-service"},"Write HTTP Service"),(0,o.kt)(i.Z,{groupId:"language",mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="BookController.java"',title:'"BookController.java"'},'@RestController\npublic class BookController {\n\n    private final JSqlClient sqlClient;\n\n    public BookController(JSqlClient sqlClient) {\n        this.sqlClient = sqlClient; \n    }\n\n    @PutMapping("/book")\n    public int saveBookInputWithShortAssociations(\n        // highlight-next-line  \n        @RequestBody BookInputWithShortAssociations input\n    ) {\n        return sqlClient\n            .save(input)\n            .getTotalAffectedRowCount();\n    } \n} \n'))),(0,o.kt)(l.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="BookController.java"',title:'"BookController.java"'},'class BookController(  \n    private val sqlClient: KSqlClient  \n) {  \n\n    @PutMapping("/book")\n    fun saveBookInputWithShortAssociations( \n        // highlight-next-line\n        @RequestBody input: BookInputWithShortAssociations\n    ): Int =\n        sqlClient\n            .save(input)\n            .totalAffectedRowCount\n}\n')))),(0,o.kt)("p",null,"It can be seen that no matter how the Input DTO changes, Jimmer still only needs one method call to complete data saving."))}h.isMDXComponent=!0}}]);