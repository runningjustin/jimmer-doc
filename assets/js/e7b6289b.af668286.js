"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[8733],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>u});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=p(n),u=i,h=m["".concat(s,".").concat(u)]||m[u]||d[u]||r;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},15368:(e,t,n)=>{n.d(t,{Z:()=>N});var a,i,r,o,l,s,p,c,d,m,u,h,A,f,k,g,b,y=n(67294);function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},v.apply(this,arguments)}const N=e=>{let{title:t,titleId:n,...N}=e;return y.createElement("svg",v({width:431,height:202,xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},N),t?y.createElement("title",{id:n},t):null,a||(a=y.createElement("path",{d:"M25 29q0-4 4-4h77q4 0 4 4v25q0 4-4 4H29q-4 0-4-4Z",stroke:"rgba(33,41,48,1)",strokeWidth:2,fill:"#fff"})),i||(i=y.createElement("text",{fontFamily:"\\u5FAE\\u8F6F\\u96C5\\u9ED1",textAnchor:"middle",fontSize:13,fill:"#323232",fontWeight:400,y:5.875,transform:"translate(25 25)"},y.createElement("tspan",{dy:16,x:42.5},y.createElement("tspan",null,"BookStore")))),r||(r=y.createElement("path",{d:"M173 29q0-4 4-4h77q4 0 4 4v25q0 4-4 4h-77q-4 0-4-4Z",stroke:"rgba(33,41,48,1)",strokeWidth:2,fill:"#fff"})),o||(o=y.createElement("text",{fontFamily:"\\u5FAE\\u8F6F\\u96C5\\u9ED1",textAnchor:"middle",fontSize:13,fill:"#323232",fontWeight:400,y:5.875,transform:"translate(173 25)"},y.createElement("tspan",{dy:16,x:42.5},y.createElement("tspan",null,"Book")))),l||(l=y.createElement("path",{d:"M321 29q0-4 4-4h77q4 0 4 4v25q0 4-4 4h-77q-4 0-4-4Z",stroke:"rgba(33,41,48,1)",strokeWidth:2,fill:"#fff"})),s||(s=y.createElement("text",{fontFamily:"\\u5FAE\\u8F6F\\u96C5\\u9ED1",textAnchor:"middle",fontSize:13,fill:"#323232",fontWeight:400,y:5.875,transform:"translate(321 25)"},y.createElement("tspan",{dy:16,x:42.5},y.createElement("tspan",null,"Author")))),p||(p=y.createElement("path",{d:"M25 148q0-4 4-4h79q4 0 4 4v25q0 4-4 4H29q-4 0-4-4Z",stroke:"rgba(33,41,48,1)",strokeWidth:2,fill:"#fff"})),c||(c=y.createElement("text",{fontFamily:"\\u5FAE\\u8F6F\\u96C5\\u9ED1",textAnchor:"middle",fontSize:13,fill:"#323232",fontWeight:400,y:5.875,transform:"translate(25 144)"},y.createElement("tspan",{dy:16,x:43.5},y.createElement("tspan",null,"TreeNode")))),d||(d=y.createElement("path",{d:"M111 42h61",stroke:"#7f7f7f",strokeWidth:2,fill:"none"})),m||(m=y.createElement("path",{fill:"#fff",d:"M131 34h21v16h-21z"})),u||(u=y.createElement("text",{fontFamily:"\\u5FAE\\u8F6F\\u96C5\\u9ED1",textAnchor:"middle",fontSize:13,fill:"#323232",fontWeight:400,y:31.375},y.createElement("tspan",{dy:16,x:141.5},y.createElement("tspan",null,"0:N")))),h||(h=y.createElement("path",{d:"M259 42h61",stroke:"#7f8b98",strokeWidth:2,fill:"none"})),A||(A=y.createElement("path",{fill:"#fff",d:"M277.5 34h24v16h-24z"})),f||(f=y.createElement("text",{fontFamily:"\\u5FAE\\u8F6F\\u96C5\\u9ED1",textAnchor:"middle",fontSize:13,fill:"#323232",fontWeight:400,y:31.375},y.createElement("tspan",{dy:16,x:289.5},y.createElement("tspan",null,"M:N")))),k||(k=y.createElement("path",{d:"m68.983 143-.483-29H142v47h-29",stroke:"#7f8b98",strokeWidth:2,fill:"none"})),g||(g=y.createElement("path",{fill:"#fff",d:"M118.248 106h21v16h-21z"})),b||(b=y.createElement("text",{fontFamily:"\\u5FAE\\u8F6F\\u96C5\\u9ED1",textAnchor:"middle",fontSize:13,fill:"#323232",fontWeight:400,y:103.375},y.createElement("tspan",{dy:16,x:128.748},y.createElement("tspan",null,"0:N")))))}},85162:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(67294),i=n(34334);const r="tabItem_Ymn6";function o(e){let{children:t,hidden:n,className:o}=e;return a.createElement("div",{role:"tabpanel",className:(0,i.Z)(r,o),hidden:n},t)}},65488:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(83117),i=n(67294),r=n(34334),o=n(72389),l=n(67392),s=n(7094),p=n(12466);const c="tabList__CuJ",d="tabItem_LNqP";function m(e){var t;const{lazy:n,block:o,defaultValue:m,values:u,groupId:h,className:A}=e,f=i.Children.map(e.children,(e=>{if((0,i.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),k=u??f.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),g=(0,l.l)(k,((e,t)=>e.value===t.value));if(g.length>0)throw new Error(`Docusaurus error: Duplicate values "${g.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const b=null===m?m:m??(null==(t=f.find((e=>e.props.default)))?void 0:t.props.value)??f[0].props.value;if(null!==b&&!k.some((e=>e.value===b)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${b}" but none of its children has the corresponding value. Available values are: ${k.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:v}=(0,s.U)(),[N,E]=(0,i.useState)(b),C=[],{blockElementScrollPositionUntilNextRender:T}=(0,p.o5)();if(null!=h){const e=y[h];null!=e&&e!==N&&k.some((t=>t.value===e))&&E(e)}const B=e=>{const t=e.currentTarget,n=C.indexOf(t),a=k[n].value;a!==N&&(T(t),E(a),null!=h&&v(h,String(a)))},F=e=>{var t;let n=null;switch(e.key){case"ArrowRight":{const t=C.indexOf(e.currentTarget)+1;n=C[t]??C[0];break}case"ArrowLeft":{const t=C.indexOf(e.currentTarget)-1;n=C[t]??C[C.length-1];break}}null==(t=n)||t.focus()};return i.createElement("div",{className:(0,r.Z)("tabs-container",c)},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":o},A)},k.map((e=>{let{value:t,label:n,attributes:o}=e;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>C.push(e),onKeyDown:F,onFocus:B,onClick:B},o,{className:(0,r.Z)("tabs__item",d,null==o?void 0:o.className,{"tabs__item--active":N===t})}),n??t)}))),n?(0,i.cloneElement)(f.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):i.createElement("div",{className:"margin-top--md"},f.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function u(e){const t=(0,o.Z)();return i.createElement(m,(0,a.Z)({key:String(t)},e))}},41220:(e,t,n)=>{n.d(t,{$0:()=>b,BP:()=>m,Hj:()=>h,Kj:()=>A,RI:()=>d,ZJ:()=>f,_R:()=>x,aO:()=>y,bD:()=>B,bg:()=>T,bn:()=>E,ce:()=>v,ef:()=>C,gc:()=>k,i5:()=>g,jl:()=>F,qj:()=>u,vc:()=>N,zf:()=>c});var a=n(67294),i=n(98456),r=n(21737),o=n(53143),l=n(86886),s=n(72389);const p=(0,a.memo)((e=>{let{src:t}=e;const n=(0,o.S)(),[p,c]=(0,a.useState)(!1),d=(0,a.useCallback)((()=>c(!0)),[]),m=(0,s.Z)();return m&&!function(){const e=S;if("boolean"==typeof e)return e;var t=document.createElement("canvas");const n=t.getContext&&t.getContext("2d")&&0==t.toDataURL("image/webp").indexOf("data:image/webp");return S=n,n}()&&t.endsWith(".webp")?a.createElement(r.Z,{security:"error"},n?"\u65e0\u6cd5\u5c55\u793a\u56fe\u7247\uff0c\u8bf7\u4f7f\u7528\u652f\u6301webp\u7684\u6d4f\u89c8\u5668":"Unable to display image, please use a browser that supports webp"):a.createElement(a.Fragment,null,m&&!p&&a.createElement(l.ZP,{container:!0,direction:"column",alignItems:"center"},a.createElement(l.ZP,{item:!0},a.createElement(i.Z,null)),a.createElement(l.ZP,{item:!0},n?"\u52a0\u8f7d\u56fe\u7247\u4e2d":"Loading image")),a.createElement("img",{src:t,onLoad:d}))})),c=(0,a.memo)((()=>a.createElement(p,{src:w}))),d=(0,a.memo)((()=>a.createElement(p,{src:R}))),m=(0,a.memo)((()=>a.createElement(p,{src:I}))),u=(0,a.memo)((()=>a.createElement(p,{src:P}))),h=(0,a.memo)((()=>a.createElement(p,{src:Z}))),A=(0,a.memo)((()=>a.createElement(p,{src:j}))),f=(0,a.memo)((()=>a.createElement(p,{src:H}))),k=(0,a.memo)((()=>a.createElement(p,{src:O}))),g=(0,a.memo)((()=>a.createElement(p,{src:q}))),b=(0,a.memo)((()=>a.createElement(p,{src:D}))),y=(0,a.memo)((()=>a.createElement(p,{src:M}))),v=(0,a.memo)((()=>a.createElement(p,{src:L}))),N=(0,a.memo)((()=>a.createElement(p,{src:G}))),E=(0,a.memo)((()=>a.createElement(p,{src:J}))),C=(0,a.memo)((()=>a.createElement(p,{src:U}))),T=(0,a.memo)((()=>a.createElement(p,{src:z}))),B=(0,a.memo)((()=>a.createElement(p,{src:V}))),F=(0,a.memo)((()=>a.createElement(p,{src:W}))),x=(0,a.memo)((()=>a.createElement(p,{src:K})));let S;const w=n(74513).Z,R=n(61278).Z,I=n(64608).Z,P=n(29148).Z,Z=n(71876).Z,j=n(86116).Z,H=n(68393).Z,O=n(78706).Z,q=n(55666).Z,D=n(12036).Z,M=n(65048).Z,L=n(34502).Z,G=n(91059).Z,J=n(66003).Z,U=(n(15368).Z,n(55515).Z),z=n(20466).Z,V=n(98272).Z,W=n(27557).Z,K=n(69339).Z;n(68555).Z},32102:(e,t,n)=>{n.d(t,{s:()=>A});var a=n(83117),i=n(67294),r=n(42293),o=n(50657),l=n(6514),s=n(54776),p=n(10155),c=n(15861),d=n(93946),m=n(9137),u=n(61274),h=n(50594);const A=(0,i.memo)((e=>{let{open:t,fullScreen:n=!1,title:a,onClose:s,children:A}=e;const[k,g]=(0,i.useState)(n),b=(0,i.useCallback)((()=>{g((e=>!e))}),[]);return i.createElement(o.Z,{open:t,onClose:s,fullScreen:k,TransitionComponent:f,maxWidth:"md"},i.createElement(r.Z,{sx:{position:"relative"}},i.createElement(p.Z,null,i.createElement(c.Z,{sx:{ml:2,flex:1},variant:"h6",component:"div"},a),i.createElement(d.Z,{onClick:b,style:{color:"white"}},k?i.createElement(u.Z,null):i.createElement(m.Z,null)),i.createElement(d.Z,{"aria-label":"close",onClick:s,style:{color:"white"}},i.createElement(h.Z,null)))),i.createElement(l.Z,null,A))})),f=i.forwardRef((function(e,t){return i.createElement(s.Z,(0,a.Z)({direction:"up",ref:t},e))}))},39511:(e,t,n)=>{n.d(t,{b:()=>o});var a=n(67294),i=n(83321),r=n(32102);const o=(0,a.memo)((e=>{let{buttonText:t,fullScreen:n=!1,title:o=t,children:l}=e;const[s,p]=(0,a.useState)(!1),c=(0,a.useCallback)((e=>{p(!0),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),[]),d=(0,a.useCallback)((()=>{p(!1)}),[]);return a.createElement(a.Fragment,null,a.createElement(i.Z,{"data-is-view-more-button":"true",onClick:c,variant:"outlined",size:"small"},t),a.createElement(r.s,{open:s,onClose:d,title:o,fullScreen:n},l))}))},53143:(e,t,n)=>{n.d(t,{S:()=>i});var a=n(52263);function i(){const{i18n:e}=(0,a.Z)(),t=e.currentLocale;return"zh"===t||"zh_cn"===t||"zh_CN"==t}},30641:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>c,default:()=>A,frontMatter:()=>p,metadata:()=>d,toc:()=>u});var a=n(83117),i=(n(67294),n(3905)),r=n(65488),o=n(85162),l=n(41220),s=n(39511);const p={sidebar_position:1,title:"Generate Client API"},c=void 0,d={unversionedId:"client/api",id:"client/api",title:"Generate Client API",description:"Basic Concepts",source:"@site/docs/client/api.mdx",sourceDirName:"client",slug:"/client/api",permalink:"/jimmer-doc/docs/client/api",draft:!1,editUrl:"https://github.com/babyfish-ct/jimmer-doc/tree/main/docs/client/api.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Generate Client API"},sidebar:"tutorialSidebar",previous:{title:"Client",permalink:"/jimmer-doc/docs/client/"},next:{title:"Generate Client Errors",permalink:"/jimmer-doc/docs/client/error"}},m={},u=[{value:"Basic Concepts",id:"basic-concepts",level:2},{value:"Solution 1 (GraphQL)",id:"solution-1-graphql",level:3},{value:"Solution 2 (Not Recommended)",id:"solution-2-not-recommended",level:3},{value:"Solution 3 (Topic of This Article)",id:"solution-3-topic-of-this-article",level:3},{value:"Usage",id:"usage",level:2},{value:"Declare @FetchBy",id:"declare-fetchby",level:3},{value:"Generate Client Code",id:"generate-client-code",level:3},{value:"Develop Web Client Project",id:"develop-web-client-project",level:3},{value:"Integrate with Custom Data",id:"integrate-with-custom-data",level:2}],h={toc:u};function A(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"basic-concepts"},"Basic Concepts"),(0,i.kt)("p",null,"If using Jimmer to build backend systems, developers have three ways to solve the ",(0,i.kt)(s.b,{buttonText:"DTO Explosion",mdxType:"ViewMore"},(0,i.kt)(l.zf,{mdxType:"DtoExplosion"}))," problem."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null}),(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"Where object shapes are restricted"),(0,i.kt)("th",{parentName:"tr",align:null},"Client experience"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Solution 1"),(0,i.kt)("td",{parentName:"tr",align:null},"Use Jimmer to build GraphQL services"),(0,i.kt)("td",{parentName:"tr",align:null},"Client side"),(0,i.kt)("td",{parentName:"tr",align:null},"Good")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Solution 2"),(0,i.kt)("td",{parentName:"tr",align:null},"Use Jimmer to build REST services, shapes specified by client"),(0,i.kt)("td",{parentName:"tr",align:null},"Client side"),(0,i.kt)("td",{parentName:"tr",align:null},"Bad")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Solution 3"),(0,i.kt)("td",{parentName:"tr",align:null},"Use Jimmer to build REST services, shapes enumerated by server"),(0,i.kt)("td",{parentName:"tr",align:null},"Server side"),(0,i.kt)("td",{parentName:"tr",align:null},"Good")))),(0,i.kt)("p",null,"Let's discuss the three cases separately:"),(0,i.kt)("h3",{id:"solution-1-graphql"},"Solution 1 (GraphQL)"),(0,i.kt)("p",null,"Use Jimmer to build GraphQL services"),(0,i.kt)("p",null,"Server: ",(0,i.kt)("a",{parentName:"p",href:"../graphql"},"Develop GraphQL Backend with Jimmer")," "),(0,i.kt)("p",null,"Client: Many client frameworks to choose from. Using my ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/babyfish-ct/graphql-ts-client"},"graphql-ts-client")," can get the ultimate TypeScript experience"),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Jimmer itself supports recursive query of self-associated properties, but so far, the GraphQL protocol does not support this feature, which means the feature will be lost.")),(0,i.kt)("h3",{id:"solution-2-not-recommended"},"Solution 2 (Not Recommended)"),(0,i.kt)("p",null,"Use Jimmer to build REST services, shapes specified by client"),(0,i.kt)("p",null,"This approach actually gives REST the capabilities of GraphQL. The client passes a string, and the server parses it into a Fetcher via ",(0,i.kt)("inlineCode",{parentName:"p"},"org.babyfish.jimmer.sql.fetcher.compiler.FetcherCompiler")),(0,i.kt)(r.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="BookController.java"',title:'"BookController.java"'},'@GetMapping("/book/{id}")\npublic Book findBookById(\n    @PathVariable long id,\n    @RequestParam(required = false) String fetcherCode\n) {\n    // highlight-next-line\n    Fetcher<Book> fetcher = FetcherCompiler.compile(fetcherCode, Book.class);\n    return bookRepository.findNullable(id, fetcher);\n}\n'))),(0,i.kt)(o.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="BookController.kt"',title:'"BookController.kt"'},'@GetMapping("/book/{id}")\nfun findBookById(\n    @PathVariable id: Long,\n    @RequestParam(required = false) fetcherCode: String?\n): Book? =\n    bookRepository.findNullable(\n        id, \n        // highlight-next-line\n        FetcherCompiler.compile(fetcherCode, Book::class.java)\n    )\n')))),(0,i.kt)("p",null,"When calling, specify the fetcherCode parameter, for example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{\n    id\n    name \n    authors {\n        id\n        firstName\n        lastName \n    }\n}\n")),(0,i.kt)("p",null,"or"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{ id, name, authors { id, firstName, lastName }}\n")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"To learn how to express more complex object fetcher in string code, refer to the ",(0,i.kt)("inlineCode",{parentName:"p"},"toString()")," method of object fetcher.")),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Although this approach can give REST capabilities similar to GraphQL, which is very flexible, it only facilitates server-side writing. The client will get a messy type system, so it is not recommended."),(0,i.kt)("p",{parentName:"admonition"},"If due to some historical constraints, the client uses JavaScript, not TypeScript, and there is no foreseeable hope of any improvement, then consider this usage.")),(0,i.kt)("h3",{id:"solution-3-topic-of-this-article"},"Solution 3 (Topic of This Article)"),(0,i.kt)("p",null,"Use Jimmer to build REST services, shapes enumerated by server "),(0,i.kt)("p",null,"This usage is more in line with the original intention of the REST protocol, and it is also easier to manage permissions ",(0,i.kt)("em",{parentName:"p"},"(although the previous two usages are flexible, permission control is very difficult)"),", and it is also the topic to be discussed in this article."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"The case discussed here is when the server API returns dynamic entities ",(0,i.kt)("em",{parentName:"p"},"(recommended)"),", not DTOs. ")),(0,i.kt)("p",null,"Let's look at a contradiction first"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Jimmer uses dynamic entities. As long as the root entity types are the same, any data structure shape can be expressed with the same Java/Kotlin type.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The client needs to see rich data types. The shapes returned by the same entity type in different HTTP interfaces are different."))),(0,i.kt)("p",null,"This contradiction is essentially the difference in awareness of ",(0,i.kt)(s.b,{buttonText:"DTO Explosion",mdxType:"ViewMore"},(0,i.kt)(l.zf,{mdxType:"DtoExplosion"}))," between the server side and the client side."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Server perspective is producer perspective."),(0,i.kt)("p",{parentName:"li"},"From the producer's point of view, DTO explosion is a very annoying problem, which means that their own development costs will also increase dramatically."),(0,i.kt)("p",{parentName:"li"},"Therefore, Jimmer uses dynamic entities combined with ",(0,i.kt)("a",{parentName:"p",href:"../query/object-fetcher"},"object fetchers")," to eliminate DTO explosions on the server side.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Client perspective is consumer perspective. "),(0,i.kt)("p",{parentName:"li"},"From the consumer's point of view, DTO explosion is beneficial, each business scenario has an accurate return type, which is very nice to use. ",(0,i.kt)("em",{parentName:"p"},"(Difficult to implement? What does that have to do with me?)")),(0,i.kt)("p",{parentName:"li"},"Therefore, Jimmer server can automatically generate client code to ",(0,i.kt)("em",{parentName:"p"},"(such as TypeScript)")," restore the DTO explosion eliminated on the server side on the client side."))),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"The server eliminates DTO explosions, and the client restores DTO explosions. This is the fundamental value of Jimmer's automatic sever-client integration, and it is also the essential difference between Jimmer and any other technology that automatically generates client code."),(0,i.kt)("p",{parentName:"admonition"},"Only by letting the server and client use completely different programming models can both sides get the ultimate development experience at the same time.")),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("h3",{id:"declare-fetchby"},"Declare @FetchBy"),(0,i.kt)("p",null,"Previously we discussed that using Jimmer to build REST services with shapes enumerated by the server is the topic to be discussed in this article."),(0,i.kt)("p",null,"To use this development approach, you need to use the ",(0,i.kt)("inlineCode",{parentName:"p"},"@org.babyfish.jimmer.client.FetchBy")," annotation to decorate dynamic entity types in REST API return types, to mark specific shapes of dynamic objects for the client."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("inlineCode",{parentName:"p"},"@FetchBy")," does not simply decorate the return value of the REST API, but is used to decorate type references. Its declaration code is as follows"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},"package org.babyfish.jimmer.client;\n\nimport java.lang.annotation.*;\n\n@Documented\n@Retention(RetentionPolicy.RUNTIME)  \n// highlight-next-line\n@Target(ElementType.TYPE_USE)\npublic @interface FetchBy {\n\n    ...omitted...\n}\n")),(0,i.kt)("p",{parentName:"admonition"},"Therefore, the return type of the REST API is very flexible. You can use it to decorate Jimmer entity types anywhere ",(0,i.kt)("em",{parentName:"p"},"(including generic parameters)"),", for example"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'@FetchBy("...") Book')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'List<@FetchBy("...") Book>')," "),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'Page<@FetchBy("...") Book>')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'Tuple2<@FetchBy("...") BookStore, @FetchBy("...") Author>')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'Map<String, Map<String, @FetchBy("...") Book>>')," "))),(0,i.kt)(r.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="BookController.java"',title:'"BookController.java"'},'@GetMapping("/books")\npublic Page<\n    @FetchBy("SIMPLE_FETCHER") Book \u2776   \n> findBookById(\n    @RequestParam(defaultValue = "0") int pageIndex,\n    @RequestParam(defaultValue = "5") int pageSize,\n    @RequestParam(defaultValue = "name asc, edition desc") String sortCode\n) {\n    return bookRepository.findBooks(\n            PageRequest.of(pageIndex, pageSize, SortUtils.toSort(sortCode)),\n            SIMPLE_FETCHER \u2777\n    );\n}\n\n@GetMapping("book/{id}")\n@Nullable\npublic \n    @FetchBy("COMPLEX_FETCHER") Book \u2778\nfindComplexBook(\n        @PathVariable("id") long id\n) {\n    return bookRepository.findNullable(\n        id, \n        COMPLEX_FETCHER \u2779\n    );\n}\n\nprivate static final Fetcher<Book> SIMPLE_FETCHER = \u277a\n    Fetchers.BOOK_FETCHER\n        .allScalarFields()\n        .tenant(false); \n\nprivate static final Fetcher<Book> COMPLEX_FETCHER = \u277b\n    Fetchers.BOOK_FETCHER\n        .allScalarFields()\n        .tenant(false)\n        .store(\n            Fetchers.BOOK_STORE_FETCHER\n                .allScalarFields()\n                .avgPrice()\n        )\n        .authors(\n            Fetchers.AUTHOR_FETCHER\n                .allScalarFields()\n        );\n'))),(0,i.kt)(o.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="BookController.kt"',title:'"BookController.kt"'},'@GetMapping("/books")\nfun findBooks(\n    @RequestParam(defaultValue = "0") pageIndex: Int,\n    @RequestParam(defaultValue = "5") pageSize: Int,\n    @RequestParam(defaultValue = "name asc, edition desc") sortCode: String\n): Page<\n    @FetchBy("SIMPLE_FETCHER") Book \u2776\n> =\n    bookRepository.findBooks(\n        PageRequest.of(pageIndex, pageSize, SortUtils.toSort(sortCode)),\n        name,\n        storeName,\n        authorName,\n        SIMPLE_FETCHER \u2777\n    )\n\n@GetMapping("/book/{id}") \nfun findBookById(\n    @PathVariable id: Long,\n): @FetchBy("COMPLEX_FETCHER") Book? = \u2778\n    bookRepository.findNullable(\n        id, \n        COMPLEX_FETCHER \u2779\n    )\n\ncompanion object {\n\n    private val SIMPLE_FETCHER = \u277a\n        newFetcher(Book::class).by {\n            allScalarFields()\n            tenant(false)\n        }\n\n    private val COMPLEX_FETCHER = \u277b\n        newFetcher(Book::class).by {\n\n            allScalarFields()\n            tenant(false)\n\n            store {\n                allScalarFields()\n                avgPrice()\n            }\n            \n            authors {\n                allScalarFields()\n            }\n        }\n}\n')))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u2776 Promise externally that the shape of each ",(0,i.kt)("inlineCode",{parentName:"p"},"Book")," object in the paged object returned by ",(0,i.kt)("inlineCode",{parentName:"p"},"GET /books")," is expressed by the static constant ",(0,i.kt)("inlineCode",{parentName:"p"},"SIMPLE_FETCHER")," ")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u2777 Internal implementation, ",(0,i.kt)("inlineCode",{parentName:"p"},"GET /books")," uses static constant ",(0,i.kt)("inlineCode",{parentName:"p"},"SIMPLE_FETCHER")," internally to query data"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},":::caution\n\u2776 as external commitment and \u2777 as internal implementation must be consistent\n:::\n"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u2778 Promise externally that if ",(0,i.kt)("inlineCode",{parentName:"p"},"GET /book/{id}")," returns non-null, its shape is expressed by the static constant ",(0,i.kt)("inlineCode",{parentName:"p"},"COMPLEX_FETCHER"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u2779 Internal implementation, ",(0,i.kt)("inlineCode",{parentName:"p"},"GET /book/{id}")," uses static constant ",(0,i.kt)("inlineCode",{parentName:"p"},"COMPLEX_FETCHER")," internally to query data"),(0,i.kt)("admonition",{parentName:"li",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"\u2778 as external commitment and \u2779 as internal implementation must be consistent "))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u277a and \u277b, declare object shapes as static constants."))),(0,i.kt)("p",null,"With the decoration of @FetchBy, Jimmer understands the specific shape of each object's externally returned data, so it can generate code for the client, including TypeScript."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"In this example, the class annotated with ",(0,i.kt)("inlineCode",{parentName:"p"},"@FetchBy")," and the class declaring object shapes with static constants are the same class. "),(0,i.kt)("p",{parentName:"admonition"},"If not, you can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"ownerType")," parameter of ",(0,i.kt)("inlineCode",{parentName:"p"},"@FetchBy"),", for example"),(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("inlineCode",{parentName:"p"},'@FetchBy(value = "COMPLEX_FETCHER", ownerType = FetcherConstants.class)'))),(0,i.kt)("h3",{id:"generate-client-code"},"Generate Client Code"),(0,i.kt)("p",null,"The following configuration can be declared in ",(0,i.kt)("inlineCode",{parentName:"p"},"application.yml")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"application.properties")," to download related client code"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"jimmer:\n    ...other configurations omitted... \n    client:\n        ts:\n            path: /ts.zip \u2776\n        java-feign:\n            path: /java-feign.zip \u2777\n")),(0,i.kt)("p",null,"Currently, Jimmer supports generating two types of client code, TypeScript and Java Feign Client code required by Spring Cloud"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u2776 Can download Web client required TypeScript code through http://localhost:8080/ts.zip")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u2777 Can download Spring Cloud required Java Feign Client code through http://localhost:8080/java-feign.zip"))),(0,i.kt)("p",null,"Next we discuss the TypeScript code."),(0,i.kt)("p",null,"Start the service, download http://localhost:8080/ts.zip, decompress it. Let the root directory after decompression be ",(0,i.kt)("inlineCode",{parentName:"p"},"${ts_root}"),":"),(0,i.kt)("p",null,"Let's take a look at ",(0,i.kt)("inlineCode",{parentName:"p"},"${ts_root}/model/dto/BookDto.ts")," first"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="BookDto.ts"',title:'"BookDto.ts"'},"export type BookDto = {\n    // highlight-next-line\n    'BookService/SIMPLE_FETCHER': {\n        readonly id: number, \n        readonly name: string,\n        readonly edition: number,\n        readonly price: number,\n    },\n    // highlight-next-line \n    'BookService/COMPLEX_FETCHER': {\n        readonly id: number,\n        readonly name: string,\n        readonly edition: number,\n        readonly price: number,\n        readonly store?: {\n            readonly id: number,\n            readonly name: string,\n            readonly website?: string,\n            readonly avgPrice: number\n        },\n        readonly authors: ReadonlyArray<{\n            readonly id: number,\n            readonly firstName: string,\n            readonly lastName: string,\n            readonly gender: Gender \n        }>\n    }\n}\n")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"It is obvious that the DTO explosion eliminated on the server side is restored on the client side. ")),(0,i.kt)("p",null,"Let's also take a look at ",(0,i.kt)("inlineCode",{parentName:"p"},"${ts_root}/services/BookService.ts")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import type { BookDto } from '../model/dto';\nimport type { Page } from '../model/static';\n\nexport class BookService {\n    \n    async findBooks(\n        options: BookServiceOptions['findBooks']\n    ): Promise<\n        Page<\n            // highlight-next-line\n            BookDto['BookService/SIMPLE_FETCHER'] \n        >\n    > {\n        ...code omitted...\n    }\n\n    async findBookById(\n        options: BookServiceOptions['findBookById']\n    ): Promise<\n        // highlight-next-line\n        BookDto['BookService/COMPLEX_FETCHER'] | \n        undefined\n    > {\n        ...code omitted...\n    }\n\n    ...other code omitted...\n}\n\nexport type BookServiceOptions = {\n    'findBooks': {\n        readonly pageIndex: number,\n        readonly pageSize: number,\n        readonly sortCode: string\n    },\n    'findBookById': {\n        readonly id: number\n    } \n}\n")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"It is obvious that the return type of each business scenario is accurately defined.")),(0,i.kt)("h3",{id:"develop-web-client-project"},"Develop Web Client Project"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create project"),(0,i.kt)("p",{parentName:"li"},"First create a typescript based react project"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"yarn create react-app my-web-app --template typescript \n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Automatically generate client code"),(0,i.kt)("p",{parentName:"li"},"Obviously, it is impossible to require client developers to manually download server code, decompress it, and replace local code every time changes occur on the server side."),(0,i.kt)("p",{parentName:"li"},"So we need to write a small script to automatically complete the download, decompression and replacement of the latest TypeScript code."),(0,i.kt)("p",{parentName:"li"},"Add folder ",(0,i.kt)("inlineCode",{parentName:"p"},"scripts")," under project root, and add file ",(0,i.kt)("inlineCode",{parentName:"p"},"generate-api.js")," under it. This file is executed by nodejs and is tooling code for development, not the code of the client itself."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="scripts/generate-api.js"',title:'"scripts/generate-api.js"'},'const http = require(\'http\');\nconst fs = require(\'fs\');\nconst fse = require(\'fs-extra\');\nconst uuid = require(\'uuid\');\nconst tempDir = require(\'temp-dir\');\nconst AdmZip = require(\'adm-zip\');\n\nconst sourceUrl = "http://localhost:8080/ts.zip";\nconst tmpFilePath = tempDir + "/" + uuid.v4() + ".zip";\nconst generatePath = "src/__generated";\n\nconsole.log("Downloading " + sourceUrl + "...");\n\nconst tmpFile = fs.createWriteStream(tmpFilePath);\n\nconst request = http.get(sourceUrl, (response) => {\n    response.pipe(tmpFile);\n    tmpFile.on("finish", () => {\n        tmpFile.close();\n        console.log("File save success: ", tmpFilePath);\n\n        // Remove generatePath if it exists\n        if (fs.existsSync(generatePath)) {\n            console.log("Removing existing generatePath...");\n            fse.removeSync(generatePath);\n            console.log("Existing generatePath removed."); \n        }\n\n        // Unzip the file using adm-zip\n        console.log("Unzipping the file...");\n        const zip = new AdmZip(tmpFilePath);\n        zip.extractAllTo(generatePath, true);\n        console.log("File unzipped successfully.");\n\n        // Remove the temporary file  \n        console.log("Removing temporary file...");\n        fs.unlink(tmpFilePath, (err) => {\n            if (err) {\n                console.error("Error while removing temporary file:", err);\n            } else {\n                console.log("Temporary file removed.");\n            }\n        });\n    });\n});\n')),(0,i.kt)("p",{parentName:"li"},"Here, ",(0,i.kt)("inlineCode",{parentName:"p"},"adm-zip")," needs to be installed separately"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"yarn add adm-zip --dev\n")),(0,i.kt)("p",{parentName:"li"},"Modify project's ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json"),' and add the following code under its "scripts" field'),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    ...other code omitted...\n    "scripts": {\n        ...other code omitted... \n        //highlight-next-line\n        "api": "node scripts/generate-api.js" \n    }\n    ...other code omitted...\n}\n')),(0,i.kt)("p",{parentName:"li"},"So every time the server team notifies that REST API changes have occurred, just execute ",(0,i.kt)("inlineCode",{parentName:"p"},"yarn api")," simply to refresh the local TypeScript client code"),(0,i.kt)("admonition",{parentName:"li",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"This method is only suitable when the web team is very small in size. If there are many web developers, it is more recommended to implement secondary development on the CI environment to achieve the following:"),(0,i.kt)("p",{parentName:"admonition"},"Each time the server code on a specific branch is committed, the CI environment compiles and starts the service, then downloads the ts code, decompresses it, and commits it to git. Finally, web engineers can simply pull the latest code from git."))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create Global API Object"),(0,i.kt)("p",{parentName:"li"},"The generated TypeScript code has a ",(0,i.kt)("inlineCode",{parentName:"p"},"__generated/Api.ts")," file that needs to be instantiated into a global variable and configured properly."),(0,i.kt)("p",{parentName:"li"},"Under ",(0,i.kt)("inlineCode",{parentName:"p"},"src"),", create ",(0,i.kt)("inlineCode",{parentName:"p"},"ApiInstance.ts")," and export the global variable ",(0,i.kt)("inlineCode",{parentName:"p"},"api")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/ApiInstance.ts"',title:'"src/ApiInstance.ts"'},"import { Api } from \"../__generated\";\n\nconst BASE_URL = \"http://localhost:8080\";\n\n// Export global variable `api` \n// highlight-next-line\nexport const api = \n    new Api(async({uri, method, body}) => {\n        const response = await fetch(`${BASE_URL}${uri}`, {\n            body: body !== undefined ? JSON.stringify(body) : undefined,\n            headers: {\n                'content-type': 'application/json;charset=UTF-8',\n                ...other important HTTP headers, e.g. Authorization...\n            }\n        });\n        if (response.status !== 200) {\n            throw response.json();\n        }\n        const text = await response.text();\n        if (text.length === 0) {\n            return null;\n        }\n        return JSON.parse(text);\n    });\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Call REST APIs"),(0,i.kt)("p",{parentName:"li"},"Now we can call REST APIs based on global variable ",(0,i.kt)("inlineCode",{parentName:"p"},"api"),"."),(0,i.kt)("admonition",{parentName:"li",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"The following examples are based on ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/immerjs/use-immer"},"use-immer")," and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/TanStack/query"},"TanStack/Query"),"."),(0,i.kt)("p",{parentName:"admonition"},"Being proficient in or quickly mastering various remote request libraries is the basic literacy of web front-end engineers, so the details are not elaborated here.  ")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Experience ",(0,i.kt)("inlineCode",{parentName:"p"},"api.bookService.findBooks")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'const [options, setOptions] = useImmer<\n    // RequestOf is a TypeScript helper class generated by Jimmer,\n    // used to extract parameter types of any REST API  \n    RequestOf<\n        typeof api.bookService.findBooks\n    >\n>(() => {\n    return {\n        pageIndex: 0,\n        pageSize: 10,\n        sortCode: "name asc"\n    };\n});\n\nconst { \n    isLoading,\n    // If `data` is not `undefined`, its type must be \n    // `Page<BookDto[\'BookService/SIMPLE_FETCHER\']>`\n    // highlight-next-line\n    data, \n    error,\n    refetch\n} = useQuery({\n    queryKey: ["Books", options],\n    // The type of `data` is determined here\n    // highlight-next-line  \n    queryFn: () => api.bookService.findBooks(options)\n});\n')),(0,i.kt)("p",{parentName:"li"},"If request succeeds, the type of ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," is ",(0,i.kt)("inlineCode",{parentName:"p"},"Page<BookDto['BookService/SIMPLE_FETCHER']>"),"."),(0,i.kt)("p",{parentName:"li"},"Where ",(0,i.kt)("inlineCode",{parentName:"p"},"BookDto['BookService/SIMPLE_FETCHER']")," is defined as"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"{\n    readonly id: number,\n    readonly name: string,\n    readonly edition: number, \n    readonly price: number,\n}\n"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Experience ",(0,i.kt)("inlineCode",{parentName:"p"},"api.bookService.findBookById")),(0,i.kt)("p",{parentName:"li"},"In the following code, assume ",(0,i.kt)("inlineCode",{parentName:"p"},"id")," is the current React primary key parameter"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const {\n    // If `data` is not `undefined`, its type must be\n    // `BookDto['BookService/COMPLEX_FETCHER']` \n    // highlight-next-line\n    data,\n    isLoading,\n    error\n} = useQuery({\n    queryKey: [\"book/detail\", id],\n    queryFn: () => api.bookService.findBookById({id: id!}),\n    enabled: id !== undefined\n});\n")),(0,i.kt)("p",{parentName:"li"},"If request succeeds and ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," is not null, its type is ",(0,i.kt)("inlineCode",{parentName:"p"},"BookDto['BookService/COMPLEX_FETCHER']"),". This type is defined as:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"{\n    readonly id: number,\n    readonly name: string,\n    readonly edition: number,\n    readonly price: number,\n    readonly store?: {\n        readonly id: number,\n        readonly name: string,\n        readonly website?: string,\n        readonly avgPrice: number  \n    },\n    readonly authors: ReadonlyArray<{\n        readonly id: number,\n        readonly firstName: string,\n        readonly lastName: string,\n        readonly gender: Gender\n    }>\n}\n")))),(0,i.kt)("admonition",{parentName:"li",type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"It can be seen that any REST API call will return strict data type definitions, and these strict type definitions will also affect the React UI template code in ",(0,i.kt)("inlineCode",{parentName:"p"},"tsx")," files."),(0,i.kt)("p",{parentName:"admonition"},"This will give full play to the advantages of TypeScript, providing good IDE intelligence, and ensuring all problems are discovered at compile time, thus having a good development experience.")))),(0,i.kt)("h2",{id:"integrate-with-custom-data"},"Integrate with Custom Data"),(0,i.kt)("p",null,"Although ",(0,i.kt)("inlineCode",{parentName:"p"},"@FetchBy")," combined with Jimmer's dynamic entities can restore DTO type definitions in client code, one situation still needs to be carefully considered: the returned data type differs greatly from the underlying entity model. For example:"),(0,i.kt)(r.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="ActiveAutorInfo.java"',title:'"ActiveAutorInfo.java"'},"@lombok.Data\npublic class ActiveAutorInfo {\n\n    private Author raw;\n\n    private List<BookStore> stores;\n}\n"))),(0,i.kt)(o.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="ActiveAutorInfo.kt"',title:'"ActiveAutorInfo.kt"'},"data class ActiveAutorInfo(\n    val raw: Author,\n    val stores: List<BookStore>\n)\n")))),(0,i.kt)("p",null,"In this example, ",(0,i.kt)("inlineCode",{parentName:"p"},"ActiveAutorInfo")," represents a very active author, containing the original information of the author ",(0,i.kt)("inlineCode",{parentName:"p"},"raw"),", and the collection of all bookstores selling his/her books. "),(0,i.kt)("p",null,"The corresponding HTTP service interface is:"),(0,i.kt)(r.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="AuthorController.java"',title:'"AuthorController.java"'},'@GetMapping("/authors/mostActive")\npublic List<ActiveAutorInfo> findMostActiveAuthorInfos(\n    @RequestParam(defaultValue = "10") int limit  \n) {\n    ...omitted...\n}\n'))),(0,i.kt)(o.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="AuthorController.kt"',title:'"AuthorController.kt"'},'@GetMapping("/authors/mostActive")\nfun findMostActiveAuthorInfos(\n    @RequestParam(defaultValue = "10") limit: Int\n): List<ActiveAutorInfo> {\n    ...omitted... \n}\n')))),(0,i.kt)("p",null,"Obviously, this data structure differs greatly from the underlying entity model. In the entity model, there is an association between ",(0,i.kt)("inlineCode",{parentName:"p"},"BookStore")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Book"),", and there is also an association between ",(0,i.kt)("inlineCode",{parentName:"p"},"Book")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Author"),", but there is no association between ",(0,i.kt)("inlineCode",{parentName:"p"},"BookStore")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Author"),"."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"In some cases, the data required by the client may contain multiple entity objects that have no direct ORM association, but only a certain business-level correlation."),(0,i.kt)("p",{parentName:"admonition"},"If such business-level correlations are not generic at all, then defining ",(0,i.kt)("a",{parentName:"p",href:"../mapping/advanced/calculated/transient"},"complex calculated properties")," for entities is not a good choice either."),(0,i.kt)("p",{parentName:"admonition"},"At this point, we can break the stereotypical thinking of the entity object graph and use custom data to represent the return results, just like ",(0,i.kt)("inlineCode",{parentName:"p"},"ActiveAutorInfo")," here.")),(0,i.kt)("p",null,"However, ",(0,i.kt)("inlineCode",{parentName:"p"},"ActiveAutorInfo")," is not a purely custom user data type, it mixes the use of Jimmer entities internally. Let's call it a hybrid type. "),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"@FetchBy")," annotation can be used to decorate the fields of this hybrid type, for example:"),(0,i.kt)(r.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="ActiveAutorInfo.java"',title:'"ActiveAutorInfo.java"'},'@lombok.Data\npublic class ActiveAutorInfo {\n\n    // highlight-next-line \n    private @FetchBy("AUTHOR_FETCHER") Author raw;\n\n    // highlight-next-line\n    private List<@FetchBy("STORE_FETCHER") BookStore> stores;\n\n    private static final Fetcher<Author> AUTHOR_FETCHER =  \n        Fetchers.AUTHOR_FETCHER\n            .firstName()\n            .lastName();\n\n    private static final Fetcher<BookStore> STORE_FETCHER =\n        Fetchers.AUTHOR_FETCHER.name(); \n}\n'))),(0,i.kt)(o.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="ActiveAutorInfo.kt"',title:'"ActiveAutorInfo.kt"'},'data class ActiveAutorInfo(\n    \n    // highlight-next-line\n    val raw: @FetchBy("AUTHOR_FETCHER") Author,\n\n    // highlight-next-line \n    val stores: List<@FetchBy("STORE_FETCHER") BookStore>\n) {\n    companion object {\n\n        private val AUTHOR_FECHER =\n            newFetcher(Author::class) {\n                firstName()\n                lastName()\n            }\n\n        private val STORE_FETCHER =\n            new Fetcher(BookStore::class) {\n                name()\n            }\n    }\n}\n')))),(0,i.kt)("p",null,"Finally, the TypeScript related types generated for ",(0,i.kt)("inlineCode",{parentName:"p"},"ActiveAutorInfo")," are as follows ",(0,i.kt)("em",{parentName:"p"},"(for convenience, the code of multiple TypeScript files is mixed here)"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"export interface ActiveAutorInfo {\n\n    // highlight-next-line\n    readonly raw: AuthorDto['ActiveAutorInfo/AUTHOR_FETCHER'];\n\n    readonly stores: ReadonlyArray<\n        // highlight-next-line \n        BookStoreDto['ActiveAutorInfo/STORE_FETCHER']\n    >;\n}\n\nexport type AuthorDto {\n    // highlight-next-line\n    'ActiveAutorInfo/AUTHOR_FETCHER': {\n        readonly id: number,\n        readonly firstName: string,\n        readonly lastName: string \n    },\n    ...other DTO types omitted...\n}\n\nexport type BookStoreDto {\n    // highlight-next-line\n    'ActiveAutorInfo/STORE_FETCHER': {\n        readonly id: number,\n        readonly name: string\n    },\n    ...other DTO types omitted... \n}\n")))}A.isMDXComponent=!0},64608:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/association-cache-dbeabc0a449a23469331c7bd822e1540.webp"},29148:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/calculated-cache-b73a5f78ce1bc73348621025d583aa47.webp"},68393:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/cloud-4029a49b29895e2ef7f199be53c647c8.webp"},86116:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/consistency-782cc1bfaf8d5f2c50a6cf4fd290c383.webp"},74513:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/dto-explosion-f0066fdbe10e41d79a21628460e40468.webp"},78706:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/generated-java-32e67690ba94b4f0d63bbd248844dd71.webp"},55666:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/generated-kt-2d53fe7a5ad2ee91828171f07954eea8.webp"},12036:(e,t,n)=>{n.d(t,{Z:()=>a});const a="data:image/webp;base64,UklGRlwDAABXRUJQVlA4WAoAAAAoAAAAIwAAHwAASUNDUBQCAAAAAAIUYXBwbAQAAABtbnRyUkdCIFhZWiAH5wADABkAEgA3ABdhY3NwQVBQTAAAAABBUFBMAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWFwcGzwmkVkcoBXfc7VHI8vo5G3AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApkZXNjAAAA/AAAAGVjcHJ0AAABZAAAACN3dHB0AAABiAAAABRyWFlaAAABnAAAABRnWFlaAAABsAAAABRiWFlaAAABxAAAABRyVFJDAAAB2AAAABBjaGFkAAAB6AAAACxiVFJDAAAB2AAAABBnVFJDAAAB2AAAABBkZXNjAAAAAAAAAAtVMjdVMkc2UjRCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHRleHQAAAAAQ29weXJpZ2h0IEFwcGxlIEluYy4sIDIwMjMAAFhZWiAAAAAAAADz2AABAAAAARYIWFlaIAAAAAAAAHLJAAA6rAAAAZFYWVogAAAAAAAAXQgAALT9AAAPUFhZWiAAAAAAAAAnBQAAEFYAAMJMcGFyYQAAAAAAAAAAAAH2BHNmMzIAAAAAAAELtwAABZb///NXAAAHKQAA/df///u3///9pgAAA9oAAMD2VlA4IK4AAABQBgCdASokACAAPo04mEelIyKhMBVdUKARiWIAxPLgLf/smI7f4opUf8y4Na5nNiiOM9fdUSb/n/4qAAD+76lTf73FZ+2hhhPQzsV9rZahOwFWYzUW6kNtghYCTvo/PpeTwWM9j+YlVt+tUxq84FN9eUFzu7J4H42kzR6StHV7YV1WZG+EvIW3H4gjv94UShhqQ2cvrX/y91uP4+a/hCq3skB3vjdta+qP9EVAAABFWElGbAAAAE1NACoAAAAIAAQBGgAFAAAAAQAAAD4BGwAFAAAAAQAAAEYBKAADAAAAAQACAACHaQAEAAAAAQAAAE4AAAAAAAAAkAAAAAEAAACQAAAAAQACoAIABAAAAAEAAAAkoAMABAAAAAEAAAAgAAAAAA=="},34502:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/graphiql-headers-676e3ff2a6da158f8a8b2b0d43633896.webp"},71876:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/multi-view-cache-57a9e6ec32df6b23eceac9376d0268d1.webp"},61278:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/object-cache-5a67daa9966fe7b728af64423333ba74.webp"},68555:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/qq-group-0f9be0ea42cca1506ad211af4ad0dbc3.webp"},91059:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/save-d37c62a7516ccbf2bc561f935cf77de2.webp"},66003:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/shape-ba5246fcd39e013ea28a73144614bd9d.webp"},65048:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/swagger-authorize-144b7e355d1d59381a6fa660b743e2a7.webp"},55515:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/api-2a7966c9db85aec24ae0d1fe0cb62c17.webp"},20466:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/code-bfdfb727fb3ccc54d12fe6a4c5ddc58f.webp"},98272:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/family-b9c1857991f5f8d662444aa9f6e2b85f.webp"},27557:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/field-05834b18f87cfe96cfd1d1a72750e9e5.webp"},69339:(e,t,n)=>{n.d(t,{Z:()=>a});const a="data:image/webp;base64,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"}}]);