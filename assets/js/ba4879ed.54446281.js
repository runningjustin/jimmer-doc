"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[7316],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>u});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},m=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),d=c(a),u=r,k=d["".concat(s,".").concat(u)]||d[u]||p[u]||i;return a?n.createElement(k,o(o({ref:t},m),{},{components:a})):n.createElement(k,o({ref:t},m))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},31536:(e,t,a)=>{a.d(t,{Z:()=>E});var n=a(80102),r=a(83117),i=a(67294),o=a(10209),l=a(59766),s=a(94780),c=a(34867);const m=(0,a(70182).ZP)();var p=a(29628),d=a(39707),u=a(66500),k=a(95408),g=a(98700),h=a(85893);const N=["component","direction","spacing","divider","children","className","useFlexGap"],f=(0,u.Z)(),b=m("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function y(e){return(0,p.Z)({props:e,name:"MuiStack",defaultTheme:f})}function v(e,t){const a=i.Children.toArray(e).filter(Boolean);return a.reduce(((e,n,r)=>(e.push(n),r<a.length-1&&e.push(i.cloneElement(t,{key:`separator-${r}`})),e)),[])}const C=({ownerState:e,theme:t})=>{let a=(0,r.Z)({display:"flex",flexDirection:"column"},(0,k.k9)({theme:t},(0,k.P$)({values:e.direction,breakpoints:t.breakpoints.values}),(e=>({flexDirection:e}))));if(e.spacing){const n=(0,g.hB)(t),r=Object.keys(t.breakpoints.values).reduce(((t,a)=>(("object"==typeof e.spacing&&null!=e.spacing[a]||"object"==typeof e.direction&&null!=e.direction[a])&&(t[a]=!0),t)),{}),i=(0,k.P$)({values:e.direction,base:r}),o=(0,k.P$)({values:e.spacing,base:r});"object"==typeof i&&Object.keys(i).forEach(((e,t,a)=>{if(!i[e]){const n=t>0?i[a[t-1]]:"column";i[e]=n}}));const s=(t,a)=>{return e.useFlexGap?{gap:(0,g.NA)(n,t)}:{"& > :not(style) ~ :not(style)":{margin:0,[`margin${r=a?i[a]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[r]}`]:(0,g.NA)(n,t)}};var r};a=(0,l.Z)(a,(0,k.k9)({theme:t},o,s))}return a=(0,k.dt)(t.breakpoints,a),a};var T=a(90948),I=a(71657);const x=function(e={}){const{createStyledComponent:t=b,useThemeProps:a=y,componentName:l="MuiStack"}=e,m=t(C),p=i.forwardRef((function(e,t){const i=a(e),p=(0,d.Z)(i),{component:u="div",direction:k="column",spacing:g=0,divider:f,children:b,className:y,useFlexGap:C=!1}=p,T=(0,n.Z)(p,N),I={direction:k,spacing:g,useFlexGap:C},x=(0,s.Z)({root:["root"]},(e=>(0,c.Z)(l,e)),{});return(0,h.jsx)(m,(0,r.Z)({as:u,ownerState:I,ref:t,className:(0,o.Z)(x.root,y)},T,{children:f?v(b,f):b}))}));return p}({createStyledComponent:(0,T.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,I.Z)({props:e,name:"MuiStack"})}),E=x},86153:(e,t,a)=>{a.d(t,{_:()=>O});var n=a(67294),r=a(87357),i=a(83321),o=a(61903),l=a(23599),s=a(86886),c=a(67720),m=a(90629),p=a(7906),d=a(295),u=a(53252),k=a(72882),g=a(53184),h=a(53816),N=a(24661),f=a(96540),b=a(93946),y=a(41733),v=a(50657),C=a(31425),T=a(6514),I=a(58951),x=a(37645),E=a(52263),Z=a(59457),w=a(53143);const O=(0,n.memo)((()=>{const{i18n:e}=(0,E.Z)(),t=(0,w.S)(),a=(0,n.useMemo)((()=>t?A:S),[t]),O=(0,n.useMemo)((()=>{const e=new Map;for(const t of a)e.set(t.id,t);return e}),[a]),P=(0,n.useMemo)((()=>t?_:B),[t]),j=(0,n.useMemo)((()=>{const e=new Map;for(const t of P)e.set(t.id,t);return e}),[P]),[M,q]=(0,Z.x)((()=>({userId:1,province:O.get(1).province,city:O.get(1).city,address:O.get(1).address,items:[{__rowId:1,productId:1,name:j.get(1).name,quantity:2},{__rowId:2,productId:10,name:j.get(10).name,quantity:1}]}))),D=(0,n.useMemo)((()=>Math.max(...M.items.map((e=>e.__rowId)))+1),[M]),F=(0,n.useCallback)((e=>{const t=O.get(parseInt(e.target.value));void 0!==t&&q((e=>{e.userId=t.id,e.province=t.province,e.city=t.city,e.address=t.address}))}),[q,O]),R=(0,n.useCallback)((e=>{q((t=>{t.province=e.target.value}))}),[q]),K=(0,n.useCallback)((e=>{q((t=>{t.city=e.target.value}))}),[q]),J=(0,n.useCallback)((e=>{q((t=>{t.address=e.target.value}))}),[q]),G=(0,n.useCallback)(((e,t)=>{q((a=>{for(const n of a.items)if(n.__rowId===t){n.productId=parseInt(e.target.value),L(a);break}}))}),[q]),U=(0,n.useCallback)(((e,t)=>{q((a=>{for(const n of a.items)if(n.__rowId===t){n.quantity=parseInt(e.target.value),L(a);break}}))}),[q]),W=(0,n.useCallback)((e=>{q((t=>{for(let a=t.items.length-1;a>=0;--a)if(t.items[a].__rowId===e){t.items.splice(a,1);break}}))}),[q]),z=(0,n.useCallback)((()=>{q((e=>{e.items.push({__rowId:D,quantity:1})}))}),[q,D]),[H,V]=(0,n.useState)(!1),Q=(0,n.useCallback)((()=>{V(!0)}),[]),X=(0,n.useCallback)((()=>{V(!1)}),[]);return n.createElement(m.Z,{elevation:3,style:{padding:"1.5rem"}},n.createElement(r.Z,{component:"form",noValidate:!0,autoComplete:"off"},n.createElement(s.ZP,{container:!0,spacing:2},n.createElement(s.ZP,{item:!0,xs:4},n.createElement(o.Z,{fullWidth:!0,select:!0,label:t?"\u8d2d\u4e70\u4eba":"Purchaser",value:M.userId,onChange:F},a.map((e=>n.createElement(l.Z,{key:e.id,value:e.id},e.nickName))))),n.createElement(s.ZP,{item:!0,xs:4},n.createElement(o.Z,{fullWidth:!0,label:t?"\u7701\u4efd":"Province",value:M.province,onChange:R})),n.createElement(s.ZP,{item:!0,xs:4},n.createElement(o.Z,{fullWidth:!0,label:t?"\u57ce\u5e02":"City",value:M.city,onChange:K})),n.createElement(s.ZP,{item:!0,xs:12},n.createElement(o.Z,{fullWidth:!0,label:t?"\u5730\u5740":"Address",value:M.address,onChange:J})),n.createElement(s.ZP,{item:!0,xs:12},n.createElement(c.Z,{textAlign:"left"},t?"\u8ba2\u5355\u660e\u7ec6":"Order Items"),n.createElement(k.Z,{component:m.Z},n.createElement(p.Z,{size:"small"},n.createElement(g.Z,null,n.createElement(h.Z,null,n.createElement(u.Z,null,t?"\u5546\u54c1":"Commodity"),n.createElement(u.Z,null,t?"\u6570\u91cf":"Quantity"),n.createElement(u.Z,null,t?"\u5355\u4ef7":"Unit price"),n.createElement(u.Z,null,t?"\u660e\u7ec6\u4ef7":"Item price"),n.createElement(u.Z,null,t?"\u5220\u9664":"Delete"))),n.createElement(d.Z,null,M.items.map((e=>{const t=void 0!==e.productId?j.get(e.productId):void 0;return n.createElement(h.Z,{key:e.__rowId},n.createElement(u.Z,null,n.createElement(o.Z,{select:!0,value:null==t?void 0:t.id,variant:"standard",size:"small",onChange:t=>{G(t,e.__rowId)}},P.map((e=>n.createElement(l.Z,{key:e.id,value:e.id},e.name))))),n.createElement(u.Z,null,n.createElement(o.Z,{type:"number",value:e.quantity,variant:"standard",size:"small",onChange:t=>{U(t,e.__rowId)}})),n.createElement(u.Z,null,null==t?void 0:t.price),n.createElement(u.Z,null,void 0!==t&&t.price*e.quantity),n.createElement(u.Z,null,n.createElement(b.Z,{onClick:()=>W(e.__rowId)},n.createElement(y.Z,null))))}))),n.createElement(N.Z,null,n.createElement(h.Z,null,n.createElement(u.Z,{colSpan:5},n.createElement(i.Z,{onClick:z},n.createElement(f.Z,null),t?"\u6dfb\u52a0":"Add"))))))),n.createElement(s.ZP,{item:!0,xs:12},t?"\u603b\u989d":"Total price",":",M.items.filter((e=>void 0!==e.productId&&"number"==typeof e.quantity)).map((e=>j.get(e.productId).price*e.quantity)).reduce(((e,t)=>e+t),0)),n.createElement(s.ZP,{item:!0,xs:12},n.createElement(i.Z,{variant:"contained",onClick:Q},t?"\u63d0\u4ea4":"Submit")))),n.createElement(v.Z,{open:H,onClose:X},n.createElement(x.Z,null,t?"\u4fe1\u606f":"Info"),n.createElement(T.Z,null,n.createElement(I.Z,null,t?"\u4ec5\u4f5c\u793a\u8303\uff0c\u65e0\u4efb\u4f55\u6548\u679c":"For demonstration only, without any effect")),n.createElement(C.Z,null,n.createElement(i.Z,{onClick:X},t?"\u5173\u95ed":"Close"))))})),A=[{id:1,nickName:"\u76ae\u76ae\u9c81",province:"\u56db\u5ddd",city:"\u6210\u90fd",address:"\u9f99\u6cc9\u9a7f\u533a\u6d2a\u7389\u8def\u4e0e\u5341\u6d2a\u8def\u4ea4\u53c9\u53e3"},{id:2,nickName:"\u9c81\u897f\u897f",province:"\u5e7f\u4e1c",city:"\u5e7f\u5dde",address:"\u767d\u4e91\u533a\u77f3\u6c99\u8def300\u53f7"},{id:3,nickName:"\u8212\u514b",province:"\u897f\u85cf",city:"\u62c9\u8428",address:"\u5806\u9f99\u5fb7\u5e86\u533a"},{id:4,nickName:"\u8d1d\u5854",province:"\u4e0a\u6d77",city:"\u4e0a\u6d77",address:"\u6d66\u4e1c\u65b0\u533a\u79c0\u6cbf\u897f\u8def218\u5f04"}],S=[{id:1,nickName:"Schneewittchen",province:"Berlin",city:"Prenzlauer Berg",address:"Brandenburgische Stra\xdfe 9, Prenzlauer Berg, Berlin, Germany"},{id:2,nickName:"Cinderella",province:"Basse-Normandie",city:"Lisieux",address:"20 rue L\xe9on Dierx, Lisieux, Basse-Normandie, France"},{id:3,nickName:"Nuwa",province:"ShanXi",city:"Taiyuan",address:"Qian Feng Nan Lu 99hao, Taiyuan, ShanXi, China"},{id:4,nickName:"Pinocchio",province:"Palazzo Pignano",city:"Cremona",address:"Via Giovanni Amendola 134, Palazzo Pignano, Cremona, Italy"}],_=[{id:1,name:"zippo\u591c\u5149\u6d41\u6c99\u6253\u706b\u673a",price:268},{id:2,name:"\u6770\u767b(Jayden)\u5370\u5ea6\u5854\u5e03\u62c9\u9f13",price:9238},{id:3,name:"\u6d6a\u7434(Longines)\u673a\u68b0\u624b\u8868",price:13900},{id:4,name:"viney\u7537\u58eb\u76ae\u5e26",price:139},{id:5,name:"\u96c5\u8bd7\u5170\u9edb\u7ed2\u96fe\u54d1\u5149\u5507\u818f",price:310},{id:6,name:"CIRCUIT\u7537\u5b50\u6ed1\u96ea\u5355\u677f",price:2044},{id:7,name:"\u7279\u4ed1\u82cf\u8131\u8102\u725b\u5976",price:47},{id:8,name:"\u4e50\u9ad8\u79ef\u6728\u5e03\u52a0\u8fea",price:374},{id:9,name:"\u53cc\u559c\u71c3\u6c14\u7535\u78c1\u901a\u7528\u538b\u529b\u9505",price:137},{id:10,name:"\u61a8\u61a8\u5ba0\u732b\u722c\u67b6",price:238}],B=[{id:1,name:"Timeless Vitamin C Plus E 10 Percent Ferulic Acid Serum Serum Unisex 1 oz",price:14.69},{id:2,name:"Dockers Men's Tiller Boat Shoe",price:52.41},{id:3,name:"Paxcoo 124 Skeins Embroidery Floss Cross Stitch Thread with Needles",price:29.99},{id:4,name:"Michael Kors Crossbody",price:70.6},{id:5,name:"Crocs unisex-child Classic Graphic Clog",price:34.99},{id:6,name:"Timex Time Machines Digital 35mm Watch",price:28.95},{id:7,name:"Scalex Mite & Lice Spray for Birds, 8 oz.",price:14.75},{id:8,name:"Under Armour Men's Storm Liner",price:13.03},{id:9,name:"Nike Women's Pro 3\" Training Shorts",price:35.86},{id:10,name:"Olaplex No. 4 Bond Maintenance Shampoo",price:30}];function L(e){const t=e.items,a=new Map;for(let n=0;n<t.length;n++){const e=t[n];if("number"!=typeof e.quantity)e.quantity=1;else if(e.quantity<1){t.splice(n--,1);continue}if(void 0===e.productId)continue;const r=a.get(e.productId);void 0===r?a.set(e.productId,e):(r.quantity+=e.quantity,t.splice(n--,1))}}},20036:(e,t,a)=>{a.d(t,{k:()=>f});var n=a(52263),r=a(94054),i=a(33841),o=a(23599),l=a(90629),s=a(43246),c=a(31536),m=a(61903),p=a(50657),d=a(37645),u=a(6514),k=a(31425),g=a(58951),h=a(83321),N=a(67294);const f=(0,N.memo)((()=>{const[e,t]=(0,N.useState)((()=>({name:"Learning GraphQL",edition:1,price:45,storeId:1,authorIds:[1,2]}))),a=(0,N.useCallback)((e=>{t((t=>({...t,name:e.target.value})))}),[]),f=(0,N.useCallback)((e=>{t((t=>({...t,edition:e.target.valueAsNumber})))}),[]),b=(0,N.useCallback)((e=>{t((t=>({...t,price:e.target.valueAsNumber})))}),[]),y=(0,N.useCallback)((e=>{let a;const n=e.target.value;a="string"==typeof n?parseInt(n):n,-1===a&&(a=void 0),t((e=>({...e,storeId:a})))}),[]),v=(0,N.useCallback)((e=>{let a=[];console.log(e.target.value);const n=e.target.value;a="string"==typeof n?n.split(",").map((e=>parseInt(e))):n,t((e=>({...e,authorIds:a})))}),[]),{i18n:C}=(0,n.Z)(),T=(0,N.useMemo)((()=>"zh"==C.currentLocale||"zh_cn"==C.currentLocale||"zh_CN"==C.currentLocale),[C.currentLocale]),[I,x]=(0,N.useState)(!1),E=(0,N.useCallback)((()=>{x(!0)}),[]),Z=(0,N.useCallback)((()=>{x(!1)}),[]);return N.createElement(l.Z,{elevation:3,style:{padding:"1.5rem",width:500}},N.createElement(c.Z,{spacing:2},N.createElement("h1",null,"Book Form"),N.createElement(m.Z,{label:"Name",value:e.name,onChange:a,error:""===e.name,helperText:""===e.name?"Name is required":""}),N.createElement(m.Z,{label:"Edition",type:"number",value:e.edition,onChange:f}),N.createElement(m.Z,{label:"Price",type:"number",value:e.price,onChange:b}),N.createElement(r.Z,{fullWidth:!0},N.createElement(i.Z,{id:"store-select-label"},"Store"),N.createElement(s.Z,{labelId:"store-select-label",label:"Authors",value:e.storeId,onChange:y},N.createElement(o.Z,{value:-1},"--NONE--"),N.createElement(o.Z,{value:1},"O'REILLY"),N.createElement(o.Z,{value:2},"MANNING"))),N.createElement(r.Z,{fullWidth:!0},N.createElement(i.Z,{id:"author-multi-select-label"},"Authors"),N.createElement(s.Z,{multiple:!0,labelId:"author-multi-select-label",label:"Authors",value:e.authorIds,onChange:v},N.createElement(o.Z,{value:1},"Eve Procello"),N.createElement(o.Z,{value:2},"Alex Banks"),N.createElement(o.Z,{value:3},"Dan Vanderkam"),N.createElement(o.Z,{value:4},"Boris Cherny"),N.createElement(o.Z,{value:5},"Samer Buna"))),N.createElement(r.Z,null,N.createElement(h.Z,{onClick:E,variant:"contained"},T?"\u63d0\u4ea4":"Submit"))),N.createElement(p.Z,{open:I,onClose:Z},N.createElement(d.Z,null,T?"\u4fe1\u606f":"Info"),N.createElement(u.Z,null,N.createElement(g.Z,null,T?"\u4ec5\u4f5c\u793a\u8303\uff0c\u65e0\u4efb\u4f55\u6548\u679c":"For demonstration only, without any effect")),N.createElement(k.Z,null,N.createElement(h.Z,{onClick:Z},"\u5173\u95ed"))))}))},32102:(e,t,a)=>{a.d(t,{s:()=>g});var n=a(83117),r=a(67294),i=a(42293),o=a(50657),l=a(6514),s=a(54776),c=a(10155),m=a(15861),p=a(93946),d=a(9137),u=a(61274),k=a(50594);const g=(0,r.memo)((e=>{let{open:t,fullScreen:a=!1,title:n,maxWidth:s="md",onClose:g,children:N}=e;const[f,b]=(0,r.useState)(a),y=(0,r.useCallback)((()=>{b((e=>!e))}),[]);return r.createElement(o.Z,{open:t,onClose:g,fullScreen:f,TransitionComponent:h,maxWidth:s},r.createElement(i.Z,{sx:{position:"relative"}},r.createElement(c.Z,null,r.createElement(m.Z,{sx:{ml:2,flex:1},variant:"h6",component:"div"},n),r.createElement(p.Z,{onClick:y,style:{color:"white"}},f?r.createElement(u.Z,null):r.createElement(d.Z,null)),r.createElement(p.Z,{"aria-label":"close",onClick:g,style:{color:"white"}},r.createElement(k.Z,null)))),r.createElement(l.Z,null,N))})),h=r.forwardRef((function(e,t){return r.createElement(s.Z,(0,n.Z)({direction:"up",ref:t},e))}))},39511:(e,t,a)=>{a.d(t,{b:()=>o});var n=a(67294),r=a(83321),i=a(32102);const o=(0,n.memo)((e=>{let{buttonText:t,fullScreen:a=!1,title:o=t,variant:l="outlined",maxWidth:s,useOriginalText:c=!0,children:m}=e;const[p,d]=(0,n.useState)(!1),u=(0,n.useCallback)((e=>{d(!0),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}),[]),k=(0,n.useCallback)((()=>{d(!1)}),[]),g=c?{textTransform:"none"}:{};return n.createElement(n.Fragment,null,n.createElement(r.Z,{"data-is-view-more-button":"true",onClick:u,variant:l,size:"small",style:g},t),n.createElement(i.s,{open:p,onClose:k,title:o,maxWidth:s,fullScreen:a},m))}))},53143:(e,t,a)=>{a.d(t,{S:()=>r});var n=a(52263);function r(){const{i18n:e}=(0,n.Z)(),t=e.currentLocale;return"zh"===t||"zh_cn"===t||"zh_CN"==t}},76500:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>p,default:()=>h,frontMatter:()=>m,metadata:()=>d,toc:()=>k});var n=a(83117),r=(a(67294),a(3905)),i=a(65488),o=a(85162),l=a(20036),s=a(86153),c=a(39511);const m={sidebar_position:6,title:"Associated Id Checking"},p=void 0,d={unversionedId:"mutation/save-command/id-checking",id:"mutation/save-command/id-checking",title:"Associated Id Checking",description:"Basic Concepts",source:"@site/docs/mutation/save-command/id-checking.mdx",sourceDirName:"mutation/save-command",slug:"/mutation/save-command/id-checking",permalink:"/jimmer-doc/docs/mutation/save-command/id-checking",draft:!1,editUrl:"https://github.com/babyfish-ct/jimmer-doc/tree/main/docs/mutation/save-command/id-checking.mdx",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,title:"Associated Id Checking"},sidebar:"tutorialSidebar",previous:{title:"Dissociation Operations",permalink:"/jimmer-doc/docs/mutation/save-command/dissociation"},next:{title:"Optimistic/Pessimistic Lock",permalink:"/jimmer-doc/docs/mutation/save-command/lock"}},u={},k=[{value:"Basic Concepts",id:"basic-concepts",level:2},{value:"For Short Associations Only",id:"for-short-associations-only",level:3},{value:"Concept Definition: Target Foreign Key",id:"concept-definition-target-foreign-key",level:3},{value:"Checking Mechanism",id:"checking-mechanism",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Global Configuration",id:"global-configuration",level:3},{value:"Command-Level Configuration",id:"command-level-configuration",level:3}],g={toc:k};function h(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},g,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"basic-concepts"},"Basic Concepts"),(0,r.kt)("h3",{id:"for-short-associations-only"},"For Short Associations Only"),(0,r.kt)("p",null,"Association id checking is a feature that only applies to ",(0,r.kt)(c.b,{buttonText:"short associations",mdxType:"ViewMore"},(0,r.kt)(l.k,{mdxType:"ShortAssociation"})),", and is meaningless for ",(0,r.kt)(c.b,{buttonText:"long associations",mdxType:"ViewMore"},(0,r.kt)(s._,{mdxType:"LongAssociation"})),"."),(0,r.kt)("p",null,"As we learned before, save commands can persist arbitrary data shapes, and any object can further hold associated objects. "),(0,r.kt)("p",null,"If the id of an associated object is specified, but the object it represents does not exist in the database, how does Jimmer handle this scenario?"),(0,r.kt)("p",null,"First, for ",(0,r.kt)(c.b,{buttonText:"long associations",mdxType:"ViewMore"},(0,r.kt)(s._,{mdxType:"LongAssociation"})),", Jimmer will first create the non-existing associated object, then establish the association between the current object and the new associated object. For example:"),(0,r.kt)(i.Z,{groupId:"language",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'sqlClient.update(\n    Objects.createBook(draft -> {\n        draft.setId(3L);\n        draft.addIntoAuthors(author -> author.setId(1L)); // \u2776\n        draft.addIntoAuthors(author -> author.setId(2L)); // \u2777\n        draft.addIntoAuthors(author -> { // \u2778\n            author.setId(1000L); \n            author.setFirstName("Svetlana");\n            author.setLastName("Isakova");\n            author.setGender(Gender.FEMALE);\n        });\n    })\n);\n'))),(0,r.kt)(o.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'sqlClient.update(\n    new(Book::class).by {\n        id = 3L\n        authors().addBy { id = 1L } // \u2776\n        authors().addBy { id = 2L } // \u2777\n        authors().addBy { // \u2778\n            id = 1000L \n            firstName = "Svetlana"\n            lastName = "Isakova"\n            gender = Gender.FEMALE\n        }\n    }\n)\n')))),(0,r.kt)("p",null,"This example mixes long associations and short associations."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u2776 \u2777 They are ",(0,r.kt)(c.b,{buttonText:"short associations",mdxType:"ViewMore"},(0,r.kt)(l.k,{mdxType:"ShortAssociation"})),", specifying invalid ids will lead to errors.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u2778 This is a ",(0,r.kt)(c.b,{buttonText:"long association",mdxType:"ViewMore"},(0,r.kt)(s._,{mdxType:"LongAssociation"})),", even if an invalid id is specified, Jimmer will automatically create the associated object."))),(0,r.kt)("p",null,"The generated SQL is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"\n// Check if associated object exists\nselect\n    tb_1_.ID,\n    tb_1_.FIRST_NAME,\n    tb_1_.LAST_NAME\nfrom AUTHOR tb_1_\nwhere\n    tb_1_.ID = ? /* 1000 */\n\n// Associated object does not exist, create it\n// highlight-next-line  \ninsert into AUTHOR(ID, FIRST_NAME, LAST_NAME, GENDER)\nvalues\n    (? /* 1000 */, ? /* Svetlana */, ? /* Isakova */, ? /* F */)\n\n// Query current `Book` and `Author` mapping\nselect\n    AUTHOR_ID\nfrom BOOK_AUTHOR_MAPPING \nwhere\n    BOOK_ID = ? /* 3 */\n\n// Map current `Book` with the newly created `Author`  \ninsert into BOOK_AUTHOR_MAPPING(BOOK_ID, AUTHOR_ID)\nvalues\n    (? /* 3 */, ? /* 1000 */)\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Therefore, ",(0,r.kt)("inlineCode",{parentName:"p"},"association id checking")," is a topic that only makes sense for ",(0,r.kt)(c.b,{buttonText:"short associations",mdxType:"ViewMore"},(0,r.kt)(l.k,{mdxType:"ShortAssociation"})),". In the following examples of this article, all discussions are about ",(0,r.kt)(c.b,{buttonText:"short associations",mdxType:"ViewMore"},(0,r.kt)(l.k,{mdxType:"ShortAssociation"})),".")),(0,r.kt)("h3",{id:"concept-definition-target-foreign-key"},"Concept Definition: Target Foreign Key"),(0,r.kt)("p",null,"To discuss the id checking problem of short associations, we first define a concept for associated properties: the target foreign key."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"For associations based on join tables, the foreign key in the join table that points to the target entity table is the target foreign key."),(0,r.kt)("p",{parentName:"li"},"For examples: "),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The target foreign key for ",(0,r.kt)("inlineCode",{parentName:"p"},"Book.authors")," is the ",(0,r.kt)("inlineCode",{parentName:"p"},"AUTHOR_ID")," field in the ",(0,r.kt)("inlineCode",{parentName:"p"},"BOOK_AUTHOR_MAPPING")," table. ")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The target foreign key for ",(0,r.kt)("inlineCode",{parentName:"p"},"Author.books")," is the ",(0,r.kt)("inlineCode",{parentName:"p"},"BOOK_ID")," field in the ",(0,r.kt)("inlineCode",{parentName:"p"},"BOOK_AUTHOR_MAPPING")," table.")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"For associations based on foreign keys, whether the foreign key is fake or not (please refer to ",(0,r.kt)("a",{parentName:"p",href:"../../mapping/base/foreignkey"},"Fake Foreign Keys"),"), the foreign key of the association itself is the target foreign key."),(0,r.kt)("p",{parentName:"li"},"For example: "),(0,r.kt)("p",{parentName:"li"},"The target foreign key for ",(0,r.kt)("inlineCode",{parentName:"p"},"Book.store")," is the ",(0,r.kt)("inlineCode",{parentName:"p"},"STORE_ID")," field in the ",(0,r.kt)("inlineCode",{parentName:"p"},"BOOK")," table.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"If neither of the above two cases apply, the association is considered to not have a target foreign key."),(0,r.kt)("p",{parentName:"li"},"Properties without a target foreign key are the ones with ",(0,r.kt)("inlineCode",{parentName:"p"},"mappedBy")," specified for one-to-one or one-to-many mappings. That is, properties decorated with ",(0,r.kt)("inlineCode",{parentName:"p"},'@OneToOne(mappedBy = "...")')," or ",(0,r.kt)("inlineCode",{parentName:"p"},'@OneToMany(mappedBy="...")'),". "),(0,r.kt)("p",{parentName:"li"},"For example: "),(0,r.kt)("p",{parentName:"li"},"There is no target foreign key for ",(0,r.kt)("inlineCode",{parentName:"p"},"BookStore.books"),"."))),(0,r.kt)("p",null,"Summary "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Association"),(0,r.kt)("th",{parentName:"tr",align:null},"Column of target foreign key"),(0,r.kt)("th",{parentName:"tr",align:null},"Table of target foreign key"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Book.authors")),(0,r.kt)("td",{parentName:"tr",align:null},"AUTHOR_ID"),(0,r.kt)("td",{parentName:"tr",align:null},"BOOK_AUTHOR_MAPPING")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Author.books")),(0,r.kt)("td",{parentName:"tr",align:null},"BOOK_ID"),(0,r.kt)("td",{parentName:"tr",align:null},"BOOK_AUTHOR_MAPPING")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Book.store")),(0,r.kt)("td",{parentName:"tr",align:null},"STORE_ID"),(0,r.kt)("td",{parentName:"tr",align:null},"BOOK")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BookStore"),".books"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"NA")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("em",{parentName:"td"},"NA"))))),(0,r.kt)("h2",{id:"checking-mechanism"},"Checking Mechanism"),(0,r.kt)("p",null,"Users can configure whether to check the ids of short associated objects. "),(0,r.kt)("p",null,"Here, let's not discuss how to configure for now, but look at whether enabling this configuration has any impact on Jimmer's behavior."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Properties without target foreign keys"),(0,r.kt)("p",{parentName:"li"},"Take ",(0,r.kt)("inlineCode",{parentName:"p"},"BookStore.books")," as an example. The code to save a short association is:"),(0,r.kt)(i.Z,{groupId:"language",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-java"},"sqlClient.update(\n        Objects.createBookStore(draft -> {\n            draft.setId(2L);\n            draft.addIntoBooks(book -> book.setId(8L));\n            draft.addIntoBooks(book -> book.setId(9L));\n            draft.addIntoBooks(book -> book.setId(1000L));\n            draft.addIntoBooks(book -> book.setId(1001L));\n        })\n);\n"))),(0,r.kt)(o.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"sqlClient.update(\n    new(BookStore::class).by {\n        id = 2L\n        books().addBy { id = 8L }\n        books().addBy { id = 9L }  \n        books().addBy { id = 1000L }\n        books().addBy { id = 1001L }\n    }\n);\n")))),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Without checking"),(0,r.kt)("p",{parentName:"li"},"Properties without a target foreign key will automatically ignore associated objects with illegal ids. For example:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"update book set store_id = 2 where id in(1, 2, 1000, 10001)\n")),(0,r.kt)("p",{parentName:"li"},"If ",(0,r.kt)("inlineCode",{parentName:"p"},"1000")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"10001")," are ids that do not exist in the database, this update statement will only affect the two existing records, and the two non-existing records will be naturally ignored.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"With checking"),(0,r.kt)("p",{parentName:"li"},"Jimmer will execute the following query to check all short associated ids:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"select\n    tb_1_.ID \nfrom BOOK tb_1_\nwhere\n    tb_1_.ID in (\n        ? /* 1 */, ? /* 2 */, ? /* 1000 */, ? /* 1001 */\n    )\n")),(0,r.kt)("p",{parentName:"li"},"If ids ",(0,r.kt)("inlineCode",{parentName:"p"},"1000")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"1001")," do not exist in the database, the following exception will be thrown:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'Save error caused by the path: "<root>.books": Illegal ids: [1000, 1001]\n'))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Properties with target foreign keys"),(0,r.kt)("p",{parentName:"li"},"Take ",(0,r.kt)("inlineCode",{parentName:"p"},"Book.store")," as an example. The code to save a short association is:"),(0,r.kt)(i.Z,{groupId:"language",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-java"},"sqlClient.update(\n        Objects.createBook(draft -> {\n            draft.setId(10L);\n            draft.applyStore(store -> store.setId(321L));\n        })\n);\n"))),(0,r.kt)(o.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"sqlClient.update(\n    new(Book::class).by {\n        id = 10L\n        store().apply { id = 321L }\n    }\n);\n")))),(0,r.kt)("p",{parentName:"li"},"Assume id ",(0,r.kt)("inlineCode",{parentName:"p"},"321")," does not exist for BookStore in the database."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Without checking"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"If the foreign key is fake, there is no real foreign key constraint in the database, and Jimmer will allow ",(0,r.kt)("inlineCode",{parentName:"p"},"BOOK.STORE_ID")," to be modified to an illegal value.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"If the foreign key is real, there is a real foreign key constraint in the database, and the underlying database will throw an error eventually.")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"With checking"),(0,r.kt)("p",{parentName:"li"},"Regardless of whether the foreign key is fake or not, Jimmer will execute the following query to check the short associated id:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"select\n    tb_1_.ID \nfrom BOOK_STORE tb_1_\nwhere\n    tb_1_.ID in (\n        ? /* 321 */\n    ) \n")),(0,r.kt)("p",{parentName:"li"},"Once the query returns no data, the following exception will be thrown:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'Save error caused by the path: "<root>.store": Illegal ids: [321]\n')))))),(0,r.kt)("p",null,"Summary "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null},"Real target foreign key"),(0,r.kt)("th",{parentName:"tr",align:null},"Fake target foreign key"),(0,r.kt)("th",{parentName:"tr",align:null},"No target foreign keys"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Without checking"),(0,r.kt)("td",{parentName:"tr",align:null},"Error from database"),(0,r.kt)("td",{parentName:"tr",align:null},"Save wrong data"),(0,r.kt)("td",{parentName:"tr",align:null},"Ignore invalid operations")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"With checking"),(0,r.kt)("td",{parentName:"tr",align:null},"Error from Jimmer"),(0,r.kt)("td",{parentName:"tr",align:null},"Error from Jimmer"),(0,r.kt)("td",{parentName:"tr",align:null},"Error from Jimmer")))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"As you can see, for properties with a real target foreign key, exceptions will be thrown regardless of whether Jimmer's short association id checking is enabled."),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Without checking, the database throws the error. "),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Advantage: Avoid an extra SQL query")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Disadvantage: Less control over the exception message and type.")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"With checking, Jimmer throws the error. "),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Advantage: clear exception message and type.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Disadvantage: An extra SQL query.")))))),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"It is recommended to turn on this checking mechanism for all properties if your project does not have extreme performance requirements, in order to get ideal exception information ",(0,r.kt)("em",{parentName:"p"},"(we will introduce how to configure it later)"),".")),(0,r.kt)("h2",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"Users can configure whether to check associated ids for properties. There are global configuration and command-level configuration."),(0,r.kt)("h3",{id:"global-configuration"},"Global Configuration"),(0,r.kt)("p",null,"The global configuration provides three levels: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"NONE")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"FAKE")," "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ALL"))),(0,r.kt)("p",null,"The behaviors are:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null},"Real target foreign key"),(0,r.kt)("th",{parentName:"tr",align:null},"Fake target foreign key"),(0,r.kt)("th",{parentName:"tr",align:null},"No target foreign keys"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"NONE"),(0,r.kt)("td",{parentName:"tr",align:null},"No checking"),(0,r.kt)("td",{parentName:"tr",align:null},"No checking"),(0,r.kt)("td",{parentName:"tr",align:null},"No checking")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"FAKE"),(0,r.kt)("td",{parentName:"tr",align:null},"No checking"),(0,r.kt)("td",{parentName:"tr",align:null},"Checking"),(0,r.kt)("td",{parentName:"tr",align:null},"Checking")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ALL"),(0,r.kt)("td",{parentName:"tr",align:null},"Checking"),(0,r.kt)("td",{parentName:"tr",align:null},"Checking"),(0,r.kt)("td",{parentName:"tr",align:null},"Checking")))),(0,r.kt)("p",null,"There are two ways to configure globally:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Via Spring Boot Starter configuration"),(0,r.kt)("p",{parentName:"li"},"Modify ",(0,r.kt)("inlineCode",{parentName:"p"},"application.yml")," ",(0,r.kt)("em",{parentName:"p"},"(or ",(0,r.kt)("inlineCode",{parentName:"em"},"application.properties"),")")," and add the following:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"jimmer:\n    id-only-target-checking-level: ALL\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Via low-level API"),(0,r.kt)(i.Z,{groupId:"language",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-java"},"JSqlClient sqlClient = JSqlClient\n    .newBuilder()\n    .setIdOnlyTargetCheckingLevel(IdOnlyTargetCheckingLevel.ALL)\n    ...other configurations omitted...\n    .build();\n"))),(0,r.kt)(o.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"val sqlClient = newKSqlClient {\n    setIdOnlyTargetCheckingLevel(IdOnlyTargetCheckingLevel.ALL) \n    ...other configurations omitted...\n}\n")))))),(0,r.kt)("h3",{id:"command-level-configuration"},"Command-Level Configuration"),(0,r.kt)("p",null,"The command-level configuration can override the global configuration, but only affects the current save command."),(0,r.kt)("p",null,"There are three features for command-level configuration:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Explicitly specify properties to check"),(0,r.kt)(i.Z,{groupId:"language",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-java"},"Book book = ...\nsqlClient\n    .getEntities()\n    .saveCommand(book)\n    // highlight-next-line  \n    .setAutoIdOnlyTargetChecking(BookProps.STORE)\n    // highlight-next-line\n    .setAutoIdOnlyTargetChecking(BookProps.AUTHORS)\n    .execute();\n"))),(0,r.kt)(o.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"val book = ...\nsqlClient.save(book) {\n    // highlight-next-line\n    setAutoIdOnlyTargetChecking(Book::store) \n    // highlight-next-line  \n    setAutoIdOnlyTargetChecking(Book::authors)\n}\n")))),(0,r.kt)("admonition",{parentName:"li",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"If the global configuration already enables checking, no need to adjust the save command like this."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Specify all properties to check"),(0,r.kt)(i.Z,{groupId:"language",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-java"},"Book book = ...\nsqlClient\n    .getEntities()\n    .saveCommand(book)\n    // highlight-next-line\n    .setAutoIdOnlyTargetCheckingAll()\n    .execute();\n"))),(0,r.kt)(o.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"val book = ...\nsqlClient.save(book) {\n    // highlight-next-line\n    setAutoIdOnlyTargetCheckingAll()\n}\n")))),(0,r.kt)("admonition",{parentName:"li",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"If the global configuration already enables checking, no need to adjust the save command like this."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Negative configuration, explicitly specify properties to not check"),(0,r.kt)(i.Z,{groupId:"language",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-java"},"Book book = ...\nsqlClient\n    .getEntities()\n    .saveCommand(book)\n    .setAutoIdOnlyTargetCheckingAll()\n    // highlight-next-line\n    .setAutoIdOnlyTargetChecking(BookProps.STORE, false)\n    .execute();\n"))),(0,r.kt)(o.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"val book = ...\nsqlClient.save(book) {\n    setAutoIdOnlyTargetCheckingAll()\n    // highlight-next-line\n    setAutoIdOnlyTargetChecking(Book::authors, false)\n}\n")))))))}h.isMDXComponent=!0}}]);